"use strict";
exports.__esModule = true;
var fs_1 = require("fs");
var path_1 = require("path");
var https_1 = require("https");
var http_1 = require("http");
var projectRoot = path_1.resolve(path_1.join(__dirname, '../..'));
var readFile = function (file) { return fs_1.readFileSync(path_1.resolve(projectRoot, file)); };
function createServer(config, app) {
    if (config.ssl) {
        var key = readFile(config.ssl.key);
        var cert = readFile(config.ssl.cert);
        return https_1.createServer({ key: key, cert: cert }, app);
    }
    return http_1.createServer(app);
}
exports.createServer = createServer;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2VydmVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL3NlcnZlci9zZXJ2ZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSx5QkFBaUM7QUFDakMsNkJBQW9DO0FBRXBDLCtCQUF5RDtBQUN6RCw2QkFBd0U7QUFFeEUsSUFBTSxXQUFXLEdBQUcsY0FBTyxDQUFDLFdBQUksQ0FBQyxTQUFTLEVBQUUsT0FBTyxDQUFDLENBQUMsQ0FBQTtBQUVyRCxJQUFNLFFBQVEsR0FBRyxVQUFDLElBQVksSUFBSyxPQUFBLGlCQUFZLENBQUMsY0FBTyxDQUFDLFdBQVcsRUFBRSxJQUFJLENBQUMsQ0FBQyxFQUF4QyxDQUF3QyxDQUFBO0FBRTNFLFNBQWdCLFlBQVksQ0FBRSxNQUFjLEVBQUUsR0FBb0I7SUFDaEUsSUFBSSxNQUFNLENBQUMsR0FBRyxFQUFFO1FBQ2QsSUFBTSxHQUFHLEdBQUcsUUFBUSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUE7UUFDcEMsSUFBTSxJQUFJLEdBQUcsUUFBUSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUE7UUFDdEMsT0FBTyxvQkFBaUIsQ0FBQyxFQUFFLEdBQUcsS0FBQSxFQUFFLElBQUksTUFBQSxFQUFFLEVBQUUsR0FBRyxDQUFDLENBQUE7S0FDN0M7SUFDRCxPQUFPLG1CQUFnQixDQUFDLEdBQUcsQ0FBQyxDQUFBO0FBQzlCLENBQUM7QUFQRCxvQ0FPQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHJlYWRGaWxlU3luYyB9IGZyb20gJ2ZzJ1xuaW1wb3J0IHsgcmVzb2x2ZSwgam9pbiB9IGZyb20gJ3BhdGgnXG5pbXBvcnQgeyBDb25maWcgfSBmcm9tICcuL2NvbmZpZydcbmltcG9ydCB7IGNyZWF0ZVNlcnZlciBhcyBjcmVhdGVIVFRQU1NlcnZlciB9IGZyb20gJ2h0dHBzJ1xuaW1wb3J0IHsgY3JlYXRlU2VydmVyIGFzIGNyZWF0ZUhUVFBTZXJ2ZXIsIFJlcXVlc3RMaXN0ZW5lciB9IGZyb20gJ2h0dHAnXG5cbmNvbnN0IHByb2plY3RSb290ID0gcmVzb2x2ZShqb2luKF9fZGlybmFtZSwgJy4uLy4uJykpXG5cbmNvbnN0IHJlYWRGaWxlID0gKGZpbGU6IHN0cmluZykgPT4gcmVhZEZpbGVTeW5jKHJlc29sdmUocHJvamVjdFJvb3QsIGZpbGUpKVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlU2VydmVyIChjb25maWc6IENvbmZpZywgYXBwOiBSZXF1ZXN0TGlzdGVuZXIpIHtcbiAgaWYgKGNvbmZpZy5zc2wpIHtcbiAgICBjb25zdCBrZXkgPSByZWFkRmlsZShjb25maWcuc3NsLmtleSlcbiAgICBjb25zdCBjZXJ0ID0gcmVhZEZpbGUoY29uZmlnLnNzbC5jZXJ0KVxuICAgIHJldHVybiBjcmVhdGVIVFRQU1NlcnZlcih7IGtleSwgY2VydCB9LCBhcHApXG4gIH1cbiAgcmV0dXJuIGNyZWF0ZUhUVFBTZXJ2ZXIoYXBwKVxufVxuIl19