"use strict";
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
exports.__esModule = true;
var async_1 = require("../async");
var constants_1 = require("../constants");
var debug_1 = __importDefault(require("debug"));
var debug = debug_1["default"]('peercalls');
exports.enumerateDevices = async_1.makeAction(constants_1.MEDIA_ENUMERATE, function () { return __awaiter(void 0, void 0, void 0, function () {
    var devices;
    return __generator(this, function (_a) {
        switch (_a.label) {
            case 0: return [4 /*yield*/, navigator.mediaDevices.enumerateDevices()];
            case 1:
                devices = _a.sent();
                return [2 /*return*/, devices
                        .filter(function (device) { return device.kind === 'audioinput' || device.kind === 'videoinput'; })
                        .map(function (device) { return ({
                        id: device.deviceId,
                        type: device.kind,
                        name: device.label
                    }); })];
        }
    });
}); });
function getUserMedia(constraints) {
    return __awaiter(this, void 0, void 0, function () {
        var _getUserMedia;
        return __generator(this, function (_a) {
            if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
                return [2 /*return*/, navigator.mediaDevices.getUserMedia(constraints)];
            }
            _getUserMedia = navigator.getUserMedia ||
                navigator.webkitGetUserMedia ||
                navigator.mozGetUserMedia;
            return [2 /*return*/, new Promise(function (resolve, reject) {
                    _getUserMedia.call(navigator, constraints, resolve, reject);
                })];
        });
    });
}
function getDisplayMedia() {
    return __awaiter(this, void 0, void 0, function () {
        var mediaDevices;
        return __generator(this, function (_a) {
            mediaDevices = navigator.mediaDevices // eslint-disable-line
            ;
            return [2 /*return*/, mediaDevices.getDisplayMedia({ video: true, audio: false })];
        });
    });
}
function setVideoConstraint(payload) {
    return {
        type: constants_1.MEDIA_VIDEO_CONSTRAINT_SET,
        payload: payload
    };
}
exports.setVideoConstraint = setVideoConstraint;
function setAudioConstraint(payload) {
    return {
        type: constants_1.MEDIA_AUDIO_CONSTRAINT_SET,
        payload: payload
    };
}
exports.setAudioConstraint = setAudioConstraint;
exports.play = async_1.makeAction('MEDIA_PLAY', function () { return __awaiter(void 0, void 0, void 0, function () {
    var promises;
    return __generator(this, function (_a) {
        switch (_a.label) {
            case 0:
                promises = Array
                    .from(document.querySelectorAll('video'))
                    .filter(function (video) { return video.paused; })
                    .map(function (video) { return video.play(); });
                return [4 /*yield*/, Promise.all(promises)];
            case 1:
                _a.sent();
                return [2 /*return*/];
        }
    });
}); });
exports.getMediaStream = async_1.makeAction(constants_1.MEDIA_STREAM, function (constraints) { return __awaiter(void 0, void 0, void 0, function () {
    var payload, _a;
    return __generator(this, function (_b) {
        switch (_b.label) {
            case 0:
                debug('getMediaStream', constraints);
                _a = {};
                return [4 /*yield*/, getUserMedia(constraints)];
            case 1:
                payload = (_a.stream = _b.sent(),
                    _a.type = constants_1.STREAM_TYPE_CAMERA,
                    _a.userId = constants_1.ME,
                    _a);
                return [2 /*return*/, payload];
        }
    });
}); });
exports.getDesktopStream = async_1.makeAction(constants_1.MEDIA_STREAM, function () { return __awaiter(void 0, void 0, void 0, function () {
    var payload, _a;
    return __generator(this, function (_b) {
        switch (_b.label) {
            case 0:
                debug('getDesktopStream');
                _a = {};
                return [4 /*yield*/, getDisplayMedia()];
            case 1:
                payload = (_a.stream = _b.sent(),
                    _a.type = constants_1.STREAM_TYPE_DESKTOP,
                    _a.userId = constants_1.ME,
                    _a);
                return [2 /*return*/, payload];
        }
    });
}); });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTWVkaWFBY3Rpb25zLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL2NsaWVudC9hY3Rpb25zL01lZGlhQWN0aW9ucy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLGtDQUFrRDtBQUNsRCwwQ0FBaUs7QUFDakssZ0RBQTBCO0FBRzFCLElBQU0sS0FBSyxHQUFHLGtCQUFNLENBQUMsV0FBVyxDQUFDLENBQUE7QUFRcEIsUUFBQSxnQkFBZ0IsR0FBRyxrQkFBVSxDQUFDLDJCQUFlLEVBQUU7Ozs7b0JBQzFDLHFCQUFNLFNBQVMsQ0FBQyxZQUFZLENBQUMsZ0JBQWdCLEVBQUUsRUFBQTs7Z0JBQXpELE9BQU8sR0FBRyxTQUErQztnQkFFL0Qsc0JBQU8sT0FBTzt5QkFDYixNQUFNLENBQ0wsVUFBQSxNQUFNLElBQUksT0FBQSxNQUFNLENBQUMsSUFBSSxLQUFLLFlBQVksSUFBSSxNQUFNLENBQUMsSUFBSSxLQUFLLFlBQVksRUFBNUQsQ0FBNEQsQ0FBQzt5QkFDeEUsR0FBRyxDQUFDLFVBQUEsTUFBTSxJQUFJLE9BQUEsQ0FBQzt3QkFDZCxFQUFFLEVBQUUsTUFBTSxDQUFDLFFBQVE7d0JBQ25CLElBQUksRUFBRSxNQUFNLENBQUMsSUFBSTt3QkFDakIsSUFBSSxFQUFFLE1BQU0sQ0FBQyxLQUFLO3FCQUNuQixDQUFnQixFQUpGLENBSUUsQ0FBQyxFQUFBOzs7S0FFbkIsQ0FBQyxDQUFBO0FBMkJGLFNBQWUsWUFBWSxDQUN6QixXQUFtQzs7OztZQUVuQyxJQUFJLFNBQVMsQ0FBQyxZQUFZLElBQUksU0FBUyxDQUFDLFlBQVksQ0FBQyxZQUFZLEVBQUU7Z0JBQ2pFLHNCQUFPLFNBQVMsQ0FBQyxZQUFZLENBQUMsWUFBWSxDQUFDLFdBQVcsQ0FBQyxFQUFBO2FBQ3hEO1lBRUssYUFBYSxHQUNqQixTQUFTLENBQUMsWUFBWTtnQkFDdEIsU0FBUyxDQUFDLGtCQUFrQjtnQkFDNUIsU0FBUyxDQUFDLGVBQWUsQ0FBQTtZQUUzQixzQkFBTyxJQUFJLE9BQU8sQ0FBYyxVQUFDLE9BQU8sRUFBRSxNQUFNO29CQUM5QyxhQUFhLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRSxXQUFXLEVBQUUsT0FBTyxFQUFFLE1BQU0sQ0FBQyxDQUFBO2dCQUM3RCxDQUFDLENBQUMsRUFBQTs7O0NBQ0g7QUFFRCxTQUFlLGVBQWU7Ozs7WUFDdEIsWUFBWSxHQUFHLFNBQVMsQ0FBQyxZQUFtQixDQUFDLHNCQUFzQjtZQUF2QixDQUFBO1lBQ2xELHNCQUFPLFlBQVksQ0FBQyxlQUFlLENBQUMsRUFBQyxLQUFLLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUMsQ0FBQyxFQUFBOzs7Q0FDakU7QUFZRCxTQUFnQixrQkFBa0IsQ0FDaEMsT0FBd0I7SUFFeEIsT0FBTztRQUNMLElBQUksRUFBRSxzQ0FBMEI7UUFDaEMsT0FBTyxTQUFBO0tBQ1IsQ0FBQTtBQUNILENBQUM7QUFQRCxnREFPQztBQUVELFNBQWdCLGtCQUFrQixDQUNoQyxPQUF3QjtJQUV4QixPQUFPO1FBQ0wsSUFBSSxFQUFFLHNDQUEwQjtRQUNoQyxPQUFPLFNBQUE7S0FDUixDQUFBO0FBQ0gsQ0FBQztBQVBELGdEQU9DO0FBRVksUUFBQSxJQUFJLEdBQUcsa0JBQVUsQ0FBQyxZQUFZLEVBQUU7Ozs7O2dCQUNyQyxRQUFRLEdBQUcsS0FBSztxQkFDckIsSUFBSSxDQUFDLFFBQVEsQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLENBQUMsQ0FBQztxQkFDeEMsTUFBTSxDQUFDLFVBQUEsS0FBSyxJQUFJLE9BQUEsS0FBSyxDQUFDLE1BQU0sRUFBWixDQUFZLENBQUM7cUJBQzdCLEdBQUcsQ0FBQyxVQUFBLEtBQUssSUFBSSxPQUFBLEtBQUssQ0FBQyxJQUFJLEVBQUUsRUFBWixDQUFZLENBQUMsQ0FBQTtnQkFDM0IscUJBQU0sT0FBTyxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsRUFBQTs7Z0JBQTNCLFNBQTJCLENBQUE7Ozs7S0FDNUIsQ0FBQyxDQUFBO0FBRVcsUUFBQSxjQUFjLEdBQUcsa0JBQVUsQ0FDdEMsd0JBQVksRUFDWixVQUFPLFdBQWdDOzs7OztnQkFDckMsS0FBSyxDQUFDLGdCQUFnQixFQUFFLFdBQVcsQ0FBQyxDQUFBOztnQkFFMUIscUJBQU0sWUFBWSxDQUFDLFdBQVcsQ0FBQyxFQUFBOztnQkFEbkMsT0FBTyxJQUNYLFNBQU0sR0FBRSxTQUErQjtvQkFDdkMsT0FBSSxHQUFFLDhCQUFrQjtvQkFDeEIsU0FBTSxHQUFFLGNBQUU7dUJBQ1g7Z0JBQ0Qsc0JBQU8sT0FBTyxFQUFBOzs7S0FDZixDQUNGLENBQUE7QUFFWSxRQUFBLGdCQUFnQixHQUFHLGtCQUFVLENBQ3hDLHdCQUFZLEVBQ1o7Ozs7O2dCQUNFLEtBQUssQ0FBQyxrQkFBa0IsQ0FBQyxDQUFBOztnQkFFZixxQkFBTSxlQUFlLEVBQUUsRUFBQTs7Z0JBRDNCLE9BQU8sSUFDWCxTQUFNLEdBQUUsU0FBdUI7b0JBQy9CLE9BQUksR0FBRSwrQkFBbUI7b0JBQ3pCLFNBQU0sR0FBRSxjQUFFO3VCQUNYO2dCQUNELHNCQUFPLE9BQU8sRUFBQTs7O0tBQ2YsQ0FDRixDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgbWFrZUFjdGlvbiwgQXN5bmNBY3Rpb24gfSBmcm9tICcuLi9hc3luYydcbmltcG9ydCB7IE1FRElBX0FVRElPX0NPTlNUUkFJTlRfU0VULCBNRURJQV9WSURFT19DT05TVFJBSU5UX1NFVCwgTUVESUFfRU5VTUVSQVRFLCBNRURJQV9TVFJFQU0sIE1FLCBTVFJFQU1fVFlQRV9DQU1FUkEsIFNUUkVBTV9UWVBFX0RFU0tUT1AgfSBmcm9tICcuLi9jb25zdGFudHMnXG5pbXBvcnQgX2RlYnVnIGZyb20gJ2RlYnVnJ1xuaW1wb3J0IHsgQWRkU3RyZWFtUGF5bG9hZCB9IGZyb20gJy4vU3RyZWFtQWN0aW9ucydcblxuY29uc3QgZGVidWcgPSBfZGVidWcoJ3BlZXJjYWxscycpXG5cbmV4cG9ydCBpbnRlcmZhY2UgTWVkaWFEZXZpY2Uge1xuICBpZDogc3RyaW5nXG4gIG5hbWU6IHN0cmluZ1xuICB0eXBlOiAnYXVkaW9pbnB1dCcgfCAndmlkZW9pbnB1dCdcbn1cblxuZXhwb3J0IGNvbnN0IGVudW1lcmF0ZURldmljZXMgPSBtYWtlQWN0aW9uKE1FRElBX0VOVU1FUkFURSwgYXN5bmMgKCkgPT4ge1xuICBjb25zdCBkZXZpY2VzID0gYXdhaXQgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5lbnVtZXJhdGVEZXZpY2VzKClcblxuICByZXR1cm4gZGV2aWNlc1xuICAuZmlsdGVyKFxuICAgIGRldmljZSA9PiBkZXZpY2Uua2luZCA9PT0gJ2F1ZGlvaW5wdXQnIHx8IGRldmljZS5raW5kID09PSAndmlkZW9pbnB1dCcpXG4gIC5tYXAoZGV2aWNlID0+ICh7XG4gICAgaWQ6IGRldmljZS5kZXZpY2VJZCxcbiAgICB0eXBlOiBkZXZpY2Uua2luZCxcbiAgICBuYW1lOiBkZXZpY2UubGFiZWwsXG4gIH0pIGFzIE1lZGlhRGV2aWNlKVxuXG59KVxuXG5leHBvcnQgdHlwZSBGYWNpbmdNb2RlID0gJ3VzZXInIHwgJ2Vudmlyb25tZW50J1xuXG5leHBvcnQgaW50ZXJmYWNlIERldmljZUNvbnN0cmFpbnQge1xuICBkZXZpY2VJZDogc3RyaW5nXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRmFjaW5nQ29uc3RyYWludCB7XG4gIGZhY2luZ01vZGU6IEZhY2luZ01vZGUgfCB7IGV4YWN0OiBGYWNpbmdNb2RlIH1cbn1cblxuZXhwb3J0IHR5cGUgVmlkZW9Db25zdHJhaW50ID0gRGV2aWNlQ29uc3RyYWludCB8IGJvb2xlYW4gfCBGYWNpbmdDb25zdHJhaW50XG5leHBvcnQgdHlwZSBBdWRpb0NvbnN0cmFpbnQgPSBEZXZpY2VDb25zdHJhaW50IHwgYm9vbGVhblxuXG5leHBvcnQgaW50ZXJmYWNlIEdldE1lZGlhQ29uc3RyYWludHMge1xuICB2aWRlbzogVmlkZW9Db25zdHJhaW50XG4gIGF1ZGlvOiBBdWRpb0NvbnN0cmFpbnRcbn1cblxuZGVjbGFyZSBnbG9iYWwge1xuICBpbnRlcmZhY2UgTmF2aWdhdG9yIHtcbiAgICB3ZWJraXRHZXRVc2VyTWVkaWE/OiB0eXBlb2YgbmF2aWdhdG9yLmdldFVzZXJNZWRpYVxuICAgIG1vekdldFVzZXJNZWRpYT86IHR5cGVvZiBuYXZpZ2F0b3IuZ2V0VXNlck1lZGlhXG4gIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gZ2V0VXNlck1lZGlhKFxuICBjb25zdHJhaW50czogTWVkaWFTdHJlYW1Db25zdHJhaW50cyxcbik6IFByb21pc2U8TWVkaWFTdHJlYW0+IHtcbiAgaWYgKG5hdmlnYXRvci5tZWRpYURldmljZXMgJiYgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEpIHtcbiAgICByZXR1cm4gbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEoY29uc3RyYWludHMpXG4gIH1cblxuICBjb25zdCBfZ2V0VXNlck1lZGlhOiB0eXBlb2YgbmF2aWdhdG9yLmdldFVzZXJNZWRpYSA9XG4gICAgbmF2aWdhdG9yLmdldFVzZXJNZWRpYSB8fFxuICAgIG5hdmlnYXRvci53ZWJraXRHZXRVc2VyTWVkaWEgfHxcbiAgICBuYXZpZ2F0b3IubW96R2V0VXNlck1lZGlhXG5cbiAgcmV0dXJuIG5ldyBQcm9taXNlPE1lZGlhU3RyZWFtPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgX2dldFVzZXJNZWRpYS5jYWxsKG5hdmlnYXRvciwgY29uc3RyYWludHMsIHJlc29sdmUsIHJlamVjdClcbiAgfSlcbn1cblxuYXN5bmMgZnVuY3Rpb24gZ2V0RGlzcGxheU1lZGlhKCk6IFByb21pc2U8TWVkaWFTdHJlYW0+IHtcbiAgY29uc3QgbWVkaWFEZXZpY2VzID0gbmF2aWdhdG9yLm1lZGlhRGV2aWNlcyBhcyBhbnkgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuICByZXR1cm4gbWVkaWFEZXZpY2VzLmdldERpc3BsYXlNZWRpYSh7dmlkZW86IHRydWUsIGF1ZGlvOiBmYWxzZX0pXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTWVkaWFWaWRlb0NvbnN0cmFpbnRBY3Rpb24ge1xuICB0eXBlOiAnTUVESUFfVklERU9fQ09OU1RSQUlOVF9TRVQnXG4gIHBheWxvYWQ6IFZpZGVvQ29uc3RyYWludFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIE1lZGlhQXVkaW9Db25zdHJhaW50QWN0aW9uIHtcbiAgdHlwZTogJ01FRElBX0FVRElPX0NPTlNUUkFJTlRfU0VUJ1xuICBwYXlsb2FkOiBBdWRpb0NvbnN0cmFpbnRcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNldFZpZGVvQ29uc3RyYWludChcbiAgcGF5bG9hZDogVmlkZW9Db25zdHJhaW50LFxuKTogTWVkaWFWaWRlb0NvbnN0cmFpbnRBY3Rpb24ge1xuICByZXR1cm4ge1xuICAgIHR5cGU6IE1FRElBX1ZJREVPX0NPTlNUUkFJTlRfU0VULFxuICAgIHBheWxvYWQsXG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNldEF1ZGlvQ29uc3RyYWludChcbiAgcGF5bG9hZDogQXVkaW9Db25zdHJhaW50LFxuKTogTWVkaWFBdWRpb0NvbnN0cmFpbnRBY3Rpb24ge1xuICByZXR1cm4ge1xuICAgIHR5cGU6IE1FRElBX0FVRElPX0NPTlNUUkFJTlRfU0VULFxuICAgIHBheWxvYWQsXG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IHBsYXkgPSBtYWtlQWN0aW9uKCdNRURJQV9QTEFZJywgYXN5bmMgKCkgPT4ge1xuICBjb25zdCBwcm9taXNlcyA9IEFycmF5XG4gIC5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ3ZpZGVvJykpXG4gIC5maWx0ZXIodmlkZW8gPT4gdmlkZW8ucGF1c2VkKVxuICAubWFwKHZpZGVvID0+IHZpZGVvLnBsYXkoKSlcbiAgYXdhaXQgUHJvbWlzZS5hbGwocHJvbWlzZXMpXG59KVxuXG5leHBvcnQgY29uc3QgZ2V0TWVkaWFTdHJlYW0gPSBtYWtlQWN0aW9uKFxuICBNRURJQV9TVFJFQU0sXG4gIGFzeW5jIChjb25zdHJhaW50czogR2V0TWVkaWFDb25zdHJhaW50cykgPT4ge1xuICAgIGRlYnVnKCdnZXRNZWRpYVN0cmVhbScsIGNvbnN0cmFpbnRzKVxuICAgIGNvbnN0IHBheWxvYWQ6IEFkZFN0cmVhbVBheWxvYWQgPSB7XG4gICAgICBzdHJlYW06IGF3YWl0IGdldFVzZXJNZWRpYShjb25zdHJhaW50cyksXG4gICAgICB0eXBlOiBTVFJFQU1fVFlQRV9DQU1FUkEsXG4gICAgICB1c2VySWQ6IE1FLFxuICAgIH1cbiAgICByZXR1cm4gcGF5bG9hZFxuICB9LFxuKVxuXG5leHBvcnQgY29uc3QgZ2V0RGVza3RvcFN0cmVhbSA9IG1ha2VBY3Rpb24oXG4gIE1FRElBX1NUUkVBTSxcbiAgYXN5bmMgKCkgPT4ge1xuICAgIGRlYnVnKCdnZXREZXNrdG9wU3RyZWFtJylcbiAgICBjb25zdCBwYXlsb2FkOiBBZGRTdHJlYW1QYXlsb2FkID0ge1xuICAgICAgc3RyZWFtOiBhd2FpdCBnZXREaXNwbGF5TWVkaWEoKSxcbiAgICAgIHR5cGU6IFNUUkVBTV9UWVBFX0RFU0tUT1AsXG4gICAgICB1c2VySWQ6IE1FLFxuICAgIH1cbiAgICByZXR1cm4gcGF5bG9hZFxuICB9LFxuKVxuXG5leHBvcnQgdHlwZSBNZWRpYUVudW1lcmF0ZUFjdGlvbiA9IEFzeW5jQWN0aW9uPCdNRURJQV9FTlVNRVJBVEUnLCBNZWRpYURldmljZVtdPlxuZXhwb3J0IHR5cGUgTWVkaWFTdHJlYW1BY3Rpb24gPSBBc3luY0FjdGlvbjwnTUVESUFfU1RSRUFNJywgQWRkU3RyZWFtUGF5bG9hZD5cbmV4cG9ydCB0eXBlIE1lZGlhUGxheUFjdGlvbiA9IEFzeW5jQWN0aW9uPCdNRURJQV9QTEFZJywgdm9pZD5cblxuZXhwb3J0IHR5cGUgTWVkaWFBY3Rpb24gPVxuICBNZWRpYVZpZGVvQ29uc3RyYWludEFjdGlvbiB8XG4gIE1lZGlhQXVkaW9Db25zdHJhaW50QWN0aW9uIHxcbiAgTWVkaWFFbnVtZXJhdGVBY3Rpb24gfFxuICBNZWRpYVN0cmVhbUFjdGlvbiB8XG4gIE1lZGlhUGxheUFjdGlvblxuIl19